<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Find people</title><script type="text/javascript" src="js/jQuery/jquery-1.7.1.min.js"></script><link href="style/style.css" rel="stylesheet" type="text/css" /><script src="js/three.min.js"></script><script src="js/ColladaLoader.js"></script><script src="js/Detector.js"></script><script>			if ( ! Detector.webgl ) Detector.addGetWebGLMessage();			var container;			var camera, scene, renderer, objects;			var particleLight, pointLight;			var dae, skin;			//Camera			var paused = false;			var last = new Date().getTime();			var down = false;			var sx = 0, sy = 0;			var rotation = Math.PI/2;			var vertical_move = 100;						//Model			var loader = new THREE.ColladaLoader();			loader.options.convertUpAxis = true;			loader.load( 'smart.dae', function ( collada ) {				dae = collada.scene;				//skin = collada.skins[ 0 ];				dae.scale.x = dae.scale.y = dae.scale.z = 25;				dae.position.y = -100;				dae.position.x = 0;								//model_geometry = collada.scene.children[ 0 ].geometry;							  	container = document.getElementById('parking_map');				//container.appendChild(model_geometry);					console.log(parseInt(container.style.width));														//for(var i = 99;i < 198;i++)				//	collada.scene.children[i].material = new THREE.MeshBasicMaterial( { color: 0xff0000, wireframe: true } );				console.log(collada);				dae.updateMatrix();				init();				animate();			} );														//Mouse Event Listener			document.addEventListener( 'mousemove', onDocumentMouseMove, true );			document.addEventListener( 'mouseup', onDocumentMouseUp, false );			document.addEventListener( 'mousedown', onDocumentMouseDown, true );						//Touch Event Listener			document.addEventListener( 'touchstart', onDocumentTouchStart, false );			document.addEventListener( 'touchmove', onDocumentTouchMove, false );			document.addEventListener( 'touchend', onDocumentTouchEnd, false );						function init() {				//container = document.createElement( 'div' );				//document.body.appendChild( container );				camera = new THREE.PerspectiveCamera( 45, parseInt(container.style.width) / parseInt(container.style.height), 1, 2000 );				camera.position.set( 0, 0, 0 );												scene = new THREE.Scene();				// Grid/*				var size = 14, step = 1;				var geometry = new THREE.Geometry();				var material = new THREE.LineBasicMaterial( { color: 0xcccccc, opacity: 0.2 } );				for ( var i = - size; i <= size; i += step ) {					geometry.vertices.push( new THREE.Vector3( - size, - 0.04, i ) );					geometry.vertices.push( new THREE.Vector3(   size, - 0.04, i ) );					geometry.vertices.push( new THREE.Vector3( i, - 0.04, - size ) );					geometry.vertices.push( new THREE.Vector3( i, - 0.04,   size ) );				}				var line = new THREE.Line( geometry, material, THREE.LinePieces );				scene.add( line );*/				// Add the COLLADA				scene.add( dae );								// Lights								var directionalLight = new THREE.DirectionalLight(/*Math.random() * 0xffffff*/0xeeeeee );				directionalLight.position.x = 0;				directionalLight.position.y = 350;				directionalLight.position.z = 500;				directionalLight.position.normalize();				scene.add( directionalLight );									//particleLight = new THREE.Mesh( new THREE.SphereGeometry( 4, 8, 8 ), new THREE.MeshBasicMaterial( { color: 0xffffff } ) );				//scene.add( particleLight );				// Lights				//scene.add( new THREE.AmbientLight( 0xcccccc ) );				//var directionalLight = new THREE.DirectionalLight(/*Math.random() * 0xffffff*/0xeeeeee );				//directionalLight.position.x = 1;				//directionalLight.position.y = 1;				//directionalLight.position.z = 1;				//directionalLight.position.normalize();				//scene.add( directionalLight );				//pointLight = new THREE.PointLight( 0xffffff, 4 );				//pointLight.position = particleLight.position;				//scene.add( pointLight );				renderer = new THREE.WebGLRenderer();				renderer.setSize(  parseInt(container.style.width), parseInt(container.style.height) );				container.appendChild( renderer.domElement );				/*stats = new Stats();				stats.domElement.style.position = 'absolute';				stats.domElement.style.top = '0px';				container.appendChild( stats.domElement );*/				//				//window.addEventListener( 'resize', onWindowResize, false );			}			function onWindowResize() {				camera.aspect =  parseInt(container.style.width) / parseInt(container.style.height);				camera.updateProjectionMatrix();				renderer.setSize(   parseInt(container.style.width), parseInt(container.style.height)  );			}			function animate() {				requestAnimationFrame( animate );				render();							}			function render() {								dae.rotation.y += Math.PI/720;								camera.lookAt( scene.position );				renderer.render( scene, camera );			}						//Mouse Event			function onDocumentMouseMove( ev ){				if (down) {				var dx = ev.clientX - sx;				var dy = ev.clientY - sy;				rotation += dx * 0.01;				vertical_move += dy;				sx += dx;				sy += dy;				//console.log("camera.y="+camera.position.y);				}				if(camera != null){					camera.position.x = Math.cos(rotation)*300;					camera.position.z = Math.sin(rotation)*300;					camera.position.y = vertical_move;					}			}						function onDocumentMouseDown( ev ){				down = true; sx = ev.clientX; sy = ev.clientY;			}						function onDocumentMouseUp(){				down = false;			}						function onDocumentTouchStart( ev ) {				if ( ev.touches.length === 1 ) {					ev.preventDefault();					down = true; 					sx = ev.touches[ 0 ].clientX; 					sy = ev.touches[ 0 ].clientY;				}			}						function onDocumentTouchEnd( ev ){								if ( ev.touches.length === 1 ) {					ev.preventDefault();					down = false;				}			}			function onDocumentTouchMove( ev ) {				if ( ev.touches.length === 1 ) {					ev.preventDefault();					if (down) {					var dx = ev.touches[ 0 ].clientX - sx;					var dy = ev.touches[ 0 ].clientY - sy;					rotation += dx * 0.01;					vertical_move += dy;					sx += dx;					sy += dy;					//console.log("camera.y="+camera.position.y);					}					if(camera != null){						camera.position.x = Math.cos(rotation)*300;						camera.position.z = Math.sin(rotation)*300;						camera.position.y = vertical_move;						}				}			}				$(function(){				});	</script></head><body><!--********************************************************************************                                                                             **                              Search People                                  **                                                                             ********************************************************************************--> <!-- This div contains the "Lookup People" page -->      <div class="shortcun_button">      <ul>             </ul>   </div>   <div id="parking_map" style="width:700px; height:800px;"></div></div></body></html>